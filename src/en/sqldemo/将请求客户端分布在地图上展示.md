Use the ip_to_province function to obtain the provinces based on the IP addresses, aggregate the data based on the ip_province field, and then calculate the number of clients in each province. The results are displayed on a map, in which the ip_province field indicates the province and the pv field indicates the number of clients.
```sql
* |
select
  ip_to_province(client_ip) as ip_province,
  count(*) as pv
group by
  ip_province
order by
  pv desc
limit
  500
```
Sample SQL query result
![image.png](/img/src/sqldemo/将请求客户端分布再地图上展示/6c4af938bee40d6aaec10076e481877934504c88e3c875c5808803a093bba999.png)
